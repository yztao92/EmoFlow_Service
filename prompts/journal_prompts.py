#!/usr/bin/env python3
# -*- coding: utf-8 -*-

"""
日记生成prompt管理（事件记录优先 + 去AI味优化版）
生成更贴近真实日常记录的心情日记
"""

def get_journal_generation_prompt(emotion: str, chat_history: str) -> str:
    """
    根据情绪状态获取日记生成prompt（事件记录优先）
    """

    prompt = f"""# 心情日记生成任务（事件记录优先）

## Step 1: 情绪诊断
当前情绪：{emotion}  
请先提炼对话中出现的主要情绪和感受，用一句话总结。

## Step 2: 写作策略
根据情绪状态选择写作路径，但统一要求"记录事件为主，情绪为辅"：
- 若是负面情绪（悲伤/不开心/生气/疲惫）：记录导致情绪的事件 → 简单点出情绪 → 可轻描淡写转折  
- 若是平和：记录安静的日常细节 → 表达轻微满足感  
- 若是积极（开心/幸福/兴奋）：记录让自己开心的事件或场景 → 衬托出正面情绪  
- 若是中性：记录当天发生的小事 → 保持轻松语气  

## Step 3: 执行生成
请生成一篇心情日记：
- 用第一人称"我"的口吻
- 以事件、场景、细节为主，情绪为辅
- 情绪必须和事件挂钩，禁止独立抽象表达
- 字数控制在 80～100 字
- 不要提到 AI、对话或提问
- 不要写时间日期
- 内容要像真实生活记录，不要像散文

## Step 4: 输出检查清单（生成前自查）
请在生成日记前检查：
- ✅ 是否包含具体事件、场景或动作（例如做了什么、遇见谁）  
- ✅ 是否避免空洞或文学化的情绪表达  
- ✅ 是否像真实的日常流水账，而不是作文  
- ✅ 是否保持简洁自然的口语化表达  

## 对话内容参考
{chat_history}

## 开始生成日记
请根据以上步骤，输出最终的日记内容：
"""

    return prompt


def get_journal_title_prompt(emotion: str, journal_content: str) -> str:
    """
    根据情绪状态获取日记标题生成prompt
    """

    prompt = f"""# 日记标题生成任务（事件记录优先）

## 任务描述
请为以下日记生成一个自然的标题：
- 不超过 10 个字
- 简洁口语化，避免书面化或套话
- 不要使用《》符号

## 日记内容
{journal_content}

## 开始生成标题
请输出一个合适的日记标题：
"""

    return prompt
